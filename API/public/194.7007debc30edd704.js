"use strict";(self.webpackChunksalon_web=self.webpackChunksalon_web||[]).push([[194],{1194:(Z,m,s)=>{s.r(m),s.d(m,{AwaitPaymentsProductModule:()=>T});var f=s(6895),c=s(4553),p=s(5861),t=s(4650),h=s(5830),g=s(7241),l=s(7890);const y=["successModal"];function _(e,i){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Oqu(n.util.translate("Waiting for payment confirmations"))}}function v(e,i){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Oqu(n.util.translate("Payment Confirmed"))}}function P(e,i){if(1&e&&(t.TgZ(0,"div",21)(1,"div",22)(2,"span",23),t._uU(3),t.qZA()()()),2&e){const n=t.oxw(2);t.xp6(3),t.Oqu(n.util.translate("Loading..."))}}function w(e,i){1&e&&(t.TgZ(0,"div",24),t.O4$(),t.TgZ(1,"svg",25),t._UZ(2,"circle",26)(3,"path",27),t.qZA()())}function x(e,i){if(1&e&&(t.TgZ(0,"div",17),t.YNc(1,_,2,1,"p",18),t.YNc(2,v,2,1,"p",18),t.YNc(3,P,4,1,"div",19),t.YNc(4,w,4,0,"div",20),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",0==n.confirmed),t.xp6(1),t.Q6J("ngIf",1==n.confirmed),t.xp6(1),t.Q6J("ngIf",0==n.confirmed),t.xp6(1),t.Q6J("ngIf",1==n.confirmed)}}function k(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",17)(1,"button",28),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.openBrowser())}),t._uU(2),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(2),t.hij(" ",n.util.translate("Pay Now")," ")}}const b=[{path:"",component:(()=>{class e{constructor(n,o,a,d,u){this.route=n,this.api=o,this.util=a,this.zone=d,this.router=u,this.confirmed=!1,this.payClick=!1,this.util.changeIntevert().subscribe(()=>{clearInterval(this.interval)}),this.route.queryParams.subscribe(r=>{console.log(r),r&&r.id&&r.payLink&&(this.orderId=r.id,this.payLink=r.payLink,this.interval=setInterval(()=>{console.log("calling"),0==this.confirmed&&this.getOrderStatus()},5e3))})}openBrowser(){var n=this;return(0,p.Z)(function*(){n.payClick=!0,yield window.open(n.payLink,"_blank")})()}ngOnInit(){}onOrderHistory(){this.successModal.hide();const n=(this.util.userInfo.first_name+"-"+this.util.userInfo.last_name).toLowerCase();this.router.navigate(["user",n,"product-order"])}onHome(){this.successModal.hide(),this.router.navigate([""])}getOrderStatus(){this.api.post_private("v1/product_order/getById",{id:this.orderId}).then(o=>{console.log(o),o&&o.status&&200==o.status&&o&&o.data&&0==o.data.status&&(this.confirmed=!0,setTimeout(()=>{clearInterval(this.interval),this.openSuccess(this.orderId)},5e3))}).catch(o=>{console.log(o),this.router.navigate([""]),this.util.errorMessage(this.util.translate("Something went wrong while payments. please contact administrator"))})}openSuccess(n){var o=this;return(0,p.Z)(function*(){o.successModal.show()})()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(c.gz),t.Y36(h.s),t.Y36(g.f),t.Y36(t.R0b),t.Y36(c.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-await-payments-product"]],viewQuery:function(n,o){if(1&n&&t.Gf(y,5),2&n){let a;t.iGM(a=t.CRH())&&(o.successModal=a.first)}},decls:23,vars:6,consts:[["mdbModal","","tabindex","-1","role","dialog","aria-labelledby","myBasicModalLabel","aria-hidden","true",1,"modal","fade",2,"z-index","999999"],["successModal","mdbModal"],["role","document",1,"modal-dialog","modal-notify","modal-success","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header","text-center"],[1,"modal-title","w-100","ff-medium","text-white"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"white-text"],[1,"modal-body"],[1,"text-center","confirm-modal"],["src","assets/images/logo.png","alt","",2,"height","100px","width","100px"],[1,"confirm-bold","mt-3"],[1,"modal-footer","justify-content-center"],["type","button","mdbBtn","","color","success","outline","true","mdbWavesEffect","",1,"waves-effect",3,"click"],["type","button","mdbBtn","","color","success","mdbWavesEffect","",1,"waves-effect",3,"click"],[1,"container"],["class","center_item",4,"ngIf"],[1,"center_item"],[4,"ngIf"],["style","display: flex;flex-direction: column;justify-content: center;align-items: center;",4,"ngIf"],["class","success-animation",4,"ngIf"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],["role","status",1,"spinner-border","text-success"],[1,"sr-only"],[1,"success-animation"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 52 52",1,"checkmark"],["cx","26","cy","26","r","25","fill","none",1,"checkmark__circle"],["fill","none","d","M14.1 27.2l7.1 7.2 16.7-16.8",1,"checkmark__check"],["type","button","mdbBtn","","color","success","mdbWavesEffect","",3,"click"]],template:function(n,o){if(1&n){const a=t.EpF();t.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h6",5),t._uU(6),t.qZA(),t.TgZ(7,"button",6),t.NdJ("click",function(){t.CHM(a);const u=t.MAs(1);return t.KtG(u.hide())}),t.TgZ(8,"span",7),t._uU(9,"\xd7"),t.qZA()()(),t.TgZ(10,"div",8)(11,"div",9),t._UZ(12,"img",10),t.TgZ(13,"h6",11),t._uU(14),t.qZA()()(),t.TgZ(15,"div",12)(16,"a",13),t.NdJ("click",function(){return o.onHome()}),t._uU(17),t.qZA(),t.TgZ(18,"a",14),t.NdJ("click",function(){return o.onOrderHistory()}),t._uU(19),t.qZA()()()()(),t.TgZ(20,"div",15),t.YNc(21,x,5,4,"div",16),t.YNc(22,k,3,1,"div",16),t.qZA()}2&n&&(t.xp6(6),t.hij("",o.util.translate("Order Success")," "),t.xp6(8),t.hij("",o.util.translate("Thank You! for your order")," "),t.xp6(3),t.hij("",o.util.translate("Back To Home")," "),t.xp6(2),t.hij(" ",o.util.translate("Track My Order")," "),t.xp6(2),t.Q6J("ngIf",1==o.payClick),t.xp6(1),t.Q6J("ngIf",0==o.payClick))},dependencies:[f.O5,l.mT,l.b6,l.oB],styles:['@charset "UTF-8";.center_item[_ngcontent-%COMP%]{padding:100px;text-align:center}.center_item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.center_item[_ngcontent-%COMP%]   .success-animation[_ngcontent-%COMP%]{margin:150px auto}.center_item[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;display:block;stroke-width:2;stroke:#4bb71b;stroke-miterlimit:10;box-shadow:inset 0 0 #4bb71b;animation:fill .4s ease-in-out .4s forwards,scale .3s ease-in-out .9s both;position:relative;top:5px;right:5px;margin:0 auto}.center_item[_ngcontent-%COMP%]   .checkmark__circle[_ngcontent-%COMP%]{stroke-dasharray:166;stroke-dashoffset:166;stroke-width:2;stroke-miterlimit:10;stroke:#4bb71b;fill:#fff;animation:stroke .6s cubic-bezier(.65,0,.45,1) forwards}.center_item[_ngcontent-%COMP%]   .checkmark__check[_ngcontent-%COMP%]{transform-origin:50% 50%;stroke-dasharray:48;stroke-dashoffset:48;animation:stroke .3s cubic-bezier(.65,0,.45,1) .8s forwards}@keyframes stroke{to{stroke-dashoffset:0}}@keyframes scale{0%,to{transform:none}50%{transform:scale3d(1.1,1.1,1)}}@keyframes fill{to{box-shadow:inset 0 0 0 30px #4bb71b}}']}),e})()}];let C=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.Bz.forChild(b),c.Bz]}),e})();var A=s(5470),M=s(4006);let T=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.ez,C,l.yi.forRoot(),A.vj,M.u5]}),e})()}}]);