"use strict";(self.webpackChunksalon_web=self.webpackChunksalon_web||[]).push([[592],{5470:(g,y,u)=>{u.d(y,{nu:()=>C,vj:()=>S});var P=u(6895),n=u(4650),m=u(7579);const v=["payPalButtonContainer"];let p=(()=>{class r{constructor(e){this.zone=e}registerScript(e,t,i){const c=window[t];if(c)return void this.zone.run(()=>{i(c)});const l=document.createElement("script");l.id=this.getElemId(t),l.innerHTML="",l.onload=()=>{this.zone.run(()=>{i(window[t])})},l.src=e,l.async=!0,l.defer=!0,document.getElementsByTagName("head")[0].appendChild(l)}cleanup(e){const t=document.getElementById(this.getElemId(e));t&&t.remove()}getElemId(e){return`ngx-paypal-script-elem-${e}`}}return r.\u0275fac=function(e){return new(e||r)(n.LFG(n.R0b))},r.\u0275prov=n.Yz7({token:r,factory:r.\u0275fac}),r})(),d=(()=>{class r{constructor(e){this.scriptService=e,this.paypalWindowName="paypal"}registerPayPalScript(e,t){this.scriptService.registerScript(this.getUrlForConfig(e),this.paypalWindowName,t)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(e){const t=[{name:"client-id",value:e.clientId}];return e.currency&&t.push({name:"currency",value:e.currency}),e.commit&&t.push({name:"commit",value:e.commit}),e.vault&&t.push({name:"vault",value:e.vault}),e.intent&&t.push({name:"intent",value:e.intent}),e.extraParams&&t.push(...e.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(t)}`}getQueryString(e){let t="";for(let i=0;i<e.length;i++){const c=e[i];t+=0===i?"?":"&",t+=`${c.name}=${c.value}`}return t}}return r.\u0275fac=function(e){return new(e||r)(n.LFG(p))},r.\u0275prov=n.Yz7({token:r,factory:r.\u0275fac}),r})(),C=(()=>{class r{constructor(e,t,i){this.paypalScriptService=e,this.cdr=t,this.ngZone=i,this.registerScript=!0,this.scriptLoaded=new n.vpe,this.ngUnsubscribe=new m.x,this.initializePayPal=!0}set payPalButtonContainer(e){this.payPalButtonContainerElem=e}ngOnChanges(e){this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());const t=this.config;e.config.isFirstChange()&&t&&this.registerScript&&this.initPayPalScript(t,i=>{this.payPal=i,this.doPayPalCheck()}),e.config.isFirstChange()||this.reinitialize(t)}ngOnDestroy(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.doPayPalCheck()}customInit(e){this.payPal=e,this.doPayPalCheck()}reinitialize(e){if(this.config=e,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild);this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,t=>{this.payPal=t,this.doPayPalCheck()}))}doPayPalCheck(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}initPayPalScript(e,t){this.paypalScriptService.registerPayPalScript({clientId:e.clientId,commit:e.advanced&&e.advanced.commit?e.advanced.commit:void 0,currency:e.currency,vault:e.vault,intent:e.intent,extraParams:e.advanced&&e.advanced.extraQueryParams?e.advanced.extraQueryParams:[]},i=>{this.scriptLoaded.next(i),t(i)})}generateElementId(){return`ngx-captcha-id-${(new Date).valueOf()}`}initPayPal(e,t){this.ngZone.runOutsideAngular(()=>{const O={style:e.style,onApprove:(a,s)=>this.ngZone.run(()=>{if(e.onApprove&&e.onApprove(a,s),e.authorizeOnServer)return e.authorizeOnServer(a,s);const h=e.onClientAuthorization;h&&s.order.capture().then(f=>{this.ngZone.run(()=>{h(f)})})}),onError:a=>{this.ngZone.run(()=>{e.onError&&e.onError(a)})},onCancel:(a,s)=>{this.ngZone.run(()=>{e.onCancel&&e.onCancel(a,s)})},onClick:(a,s)=>{this.ngZone.run(()=>{e.onClick&&e.onClick(a,s)})},onInit:(a,s)=>{this.ngZone.run(()=>{e.onInit&&e.onInit(a,s)})},...(e.createOrderOnClient||e.createOrderOnServer)&&{createOrder:(a,s)=>this.ngZone.run(()=>{if(e.createOrderOnClient&&e.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!e.createOrderOnClient&&!e.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(e.createOrderOnClient)return s.order.create(e.createOrderOnClient(a));if(e.createOrderOnServer)return e.createOrderOnServer(a);throw Error("Invalid state for 'createOrder'.")})},...e.createSubscriptionOnClient&&{createSubscription:(a,s)=>this.ngZone.run(()=>{if(e.createSubscriptionOnClient)return s.subscription.create(e.createSubscriptionOnClient(a))})},...e.onShippingChange&&{onShippingChange:(a,s)=>this.ngZone.run(()=>{if(e.onShippingChange)return e.onShippingChange(a,s)})}};t.Buttons(O).render(`#${this.payPalButtonContainerId}`)})}}return r.\u0275fac=function(e){return new(e||r)(n.Y36(d),n.Y36(n.sBO),n.Y36(n.R0b))},r.\u0275cmp=n.Xpm({type:r,selectors:[["ngx-paypal"]],viewQuery:function(e,t){if(1&e&&n.Gf(v,5),2&e){let i;n.iGM(i=n.CRH())&&(t.payPalButtonContainer=i.first)}},inputs:{config:"config",registerScript:"registerScript"},outputs:{scriptLoaded:"scriptLoaded"},features:[n.TTD],decls:2,vars:1,consts:[[3,"id"],["payPalButtonContainer",""]],template:function(e,t){1&e&&n._UZ(0,"div",0,1),2&e&&n.Q6J("id",t.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),r})(),S=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({providers:[p,d],imports:[[P.ez]]}),r})()}}]);